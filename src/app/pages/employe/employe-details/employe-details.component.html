<app-notif *ngIf="notif" [notifContent]="notifContent"/>
<div class="p-4">
    <!-- Bouton retour -->
    <a [routerLink]="routes.EMPLOYE.LIST" class="button-clair mb-4">
        <i class="ri-arrow-left-line"></i> <span>Retour à la liste</span>
    </a>

    <!-- En-tête avec photo et boutons -->
    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6">
        <div class="flex items-center mb-4 sm:mb-0">
            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Photo" class="rounded-full w-20 h-20 mr-4">
            <div>
                <h2 class="text-3xl font-bold mb-1">{{employe?.employe!.nom}} {{employe?.employe!.prenom}}<span class="ml-2 px-2 py-1 text-sm {{employe?.employe!.statut == 'Actif' ? 'actif' : (employe?.employe!.statut =='Inactif' ? 'inactif' : 'conge')}} rounded">{{employe?.employe!.statut}}</span></h2>
                <p class="text-gray-600">{{employe?.employe!.adresse}}</p>
            </div>
        </div>
        <div class="flex space-x-2 w-fit">
            <button class="button-clair">
                <i class="ri-mail-line"></i>
                <span>Contacter</span>
            </button>
            <button (click)="generateBulletin()" class="button">
                <i class="ri-article-line"></i>
                <span>Créer un bulletin</span>
            </button>
        </div>
    </div>

    <!-- Grille principale -->
    <div class="flex flex-col sm:flex-row sm:justify-between gap-4">

        <!-- Informations personnelles -->
        <div class="w-full sm:w-[30%] bg-white p-5 rounded shadow b-light">
            <h3 class="font-semibold mb-4 text-lg">Informations personnelles</h3>
            <div class="flex flex-col space-y-2 text-gray-700">
                <span class="space-x-2">
                    <i class="ri-mail-line"></i>
                    <span>{{employe?.employe!.email}}</span>
                </span> 
                <span class="space-x-2">
                    <i class="ri-phone-line"></i>
                    <span>{{employe?.employe!.telephone}}</span>
                </span> 
                <span class="space-x-2">
                    <i class="ri-calendar-2-line"></i>
                    <span>Embauché le {{employe?.employe!.dateEmbauche}}</span>
                </span> 
                <span class="space-x-2">
                    <i class="ri-wallet-line"></i>
                    <span>Salaire annuel: {{employe?.employe!.salaireBase}} CFA</span>
                </span> 
            </div>
        </div>

        <!-- Historique de paie -->
        <div class="w-full sm:w-[70%] bg-white p-5 rounded shadow b-light">
            <h3 class="font-semibold mb-4 text-lg">Historique de paie</h3>

            <!-- Onglets -->
            <div class="flex space-x-4 border-b mb-4">
                <button (click)="switchTab('bulletins')" [class.border-b-2]="activeTab === 'bulletins'" class="pb-2" [class.border-blue-600]="activeTab === 'bulletins'">Bulletins</button>
                <button (click)="switchTab('remunerations')" [class.border-b-2]="activeTab === 'remunerations'" class="pb-2" [class.border-blue-600]="activeTab === 'remunerations'">Rémunérations</button>
            </div>

            <!-- Contenu des onglets -->
            <ng-container [ngSwitch]="activeTab">

                <div *ngSwitchCase="'bulletins'">
                    <app-bulletin-item (refresh)="refresh()" (notif)="showNotif($event)" [bulletins]="employe?.bulletins" />
                </div>

                <div *ngSwitchCase="'remunerations'">
                    <app-remuneration-item (refresh)="refresh()" (notif)="showNotif($event)" [remunerations]="employe?.remunerations" />
                </div>
            </ng-container>

        </div>
    </div>
</div>
